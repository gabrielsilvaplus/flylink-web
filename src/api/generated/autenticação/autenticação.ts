/**
 * Generated by orval v8.2.0 üç∫
 * Do not edit manually.
 * FlyLink - URL Shortener API
 * API REST para encurtamento de URLs com autentica√ß√£o JWT. Permite criar, listar e gerenciar URLs encurtadas com redirecionamento autom√°tico.
 * OpenAPI spec version: 1.0.0
 */
import { useMutation } from '@tanstack/react-query'
import type {
  MutationFunction,
  QueryClient,
  UseMutationOptions,
  UseMutationResult,
} from '@tanstack/react-query'

import type { AuthResponse, ErrorResponse, LoginRequest, RegisterRequest } from '.././schemas'

import { customInstance } from '../../../lib/axios'
import type { ErrorType, BodyType } from '../../../lib/axios'

type SecondParameter<T extends (...args: never) => unknown> = Parameters<T>[1]

/**
 * Cria uma conta e retorna um token JWT para autentica√ß√£o imediata.
 * @summary Registrar novo usu√°rio
 */
export type registerResponse201 = {
  data: AuthResponse
  status: 201
}

export type registerResponse400 = {
  data: ErrorResponse
  status: 400
}

export type registerResponse409 = {
  data: ErrorResponse
  status: 409
}

export type registerResponseSuccess = registerResponse201 & {
  headers: Headers
}
export type registerResponseError = (registerResponse400 | registerResponse409) & {
  headers: Headers
}

export type registerResponse = registerResponseSuccess | registerResponseError

export const getRegisterUrl = () => {
  return `/api/v1/auth/register`
}

export const register = async (
  registerRequest: RegisterRequest,
  options?: RequestInit
): Promise<registerResponse> => {
  return customInstance<registerResponse>(getRegisterUrl(), {
    ...options,
    method: 'POST',
    headers: { 'Content-Type': 'application/json', ...options?.headers },
    body: JSON.stringify(registerRequest),
  })
}

export const getRegisterMutationOptions = <
  TError = ErrorType<ErrorResponse>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof register>>,
    TError,
    { data: BodyType<RegisterRequest> },
    TContext
  >
  request?: SecondParameter<typeof customInstance>
}): UseMutationOptions<
  Awaited<ReturnType<typeof register>>,
  TError,
  { data: BodyType<RegisterRequest> },
  TContext
> => {
  const mutationKey = ['register']
  const { mutation: mutationOptions, request: requestOptions } = options
    ? options.mutation && 'mutationKey' in options.mutation && options.mutation.mutationKey
      ? options
      : { ...options, mutation: { ...options.mutation, mutationKey } }
    : { mutation: { mutationKey }, request: undefined }

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof register>>,
    { data: BodyType<RegisterRequest> }
  > = (props) => {
    const { data } = props ?? {}

    return register(data, requestOptions)
  }

  return { mutationFn, ...mutationOptions }
}

export type RegisterMutationResult = NonNullable<Awaited<ReturnType<typeof register>>>
export type RegisterMutationBody = BodyType<RegisterRequest>
export type RegisterMutationError = ErrorType<ErrorResponse>

/**
 * @summary Registrar novo usu√°rio
 */
export const useRegister = <TError = ErrorType<ErrorResponse>, TContext = unknown>(
  options?: {
    mutation?: UseMutationOptions<
      Awaited<ReturnType<typeof register>>,
      TError,
      { data: BodyType<RegisterRequest> },
      TContext
    >
    request?: SecondParameter<typeof customInstance>
  },
  queryClient?: QueryClient
): UseMutationResult<
  Awaited<ReturnType<typeof register>>,
  TError,
  { data: BodyType<RegisterRequest> },
  TContext
> => {
  return useMutation(getRegisterMutationOptions(options), queryClient)
}
/**
 * Autentica com email e senha, retorna um token JWT.
 * @summary Login
 */
export type loginResponse200 = {
  data: AuthResponse
  status: 200
}

export type loginResponse400 = {
  data: ErrorResponse
  status: 400
}

export type loginResponse401 = {
  data: ErrorResponse
  status: 401
}

export type loginResponseSuccess = loginResponse200 & {
  headers: Headers
}
export type loginResponseError = (loginResponse400 | loginResponse401) & {
  headers: Headers
}

export type loginResponse = loginResponseSuccess | loginResponseError

export const getLoginUrl = () => {
  return `/api/v1/auth/login`
}

export const login = async (
  loginRequest: LoginRequest,
  options?: RequestInit
): Promise<loginResponse> => {
  return customInstance<loginResponse>(getLoginUrl(), {
    ...options,
    method: 'POST',
    headers: { 'Content-Type': 'application/json', ...options?.headers },
    body: JSON.stringify(loginRequest),
  })
}

export const getLoginMutationOptions = <
  TError = ErrorType<ErrorResponse>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof login>>,
    TError,
    { data: BodyType<LoginRequest> },
    TContext
  >
  request?: SecondParameter<typeof customInstance>
}): UseMutationOptions<
  Awaited<ReturnType<typeof login>>,
  TError,
  { data: BodyType<LoginRequest> },
  TContext
> => {
  const mutationKey = ['login']
  const { mutation: mutationOptions, request: requestOptions } = options
    ? options.mutation && 'mutationKey' in options.mutation && options.mutation.mutationKey
      ? options
      : { ...options, mutation: { ...options.mutation, mutationKey } }
    : { mutation: { mutationKey }, request: undefined }

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof login>>,
    { data: BodyType<LoginRequest> }
  > = (props) => {
    const { data } = props ?? {}

    return login(data, requestOptions)
  }

  return { mutationFn, ...mutationOptions }
}

export type LoginMutationResult = NonNullable<Awaited<ReturnType<typeof login>>>
export type LoginMutationBody = BodyType<LoginRequest>
export type LoginMutationError = ErrorType<ErrorResponse>

/**
 * @summary Login
 */
export const useLogin = <TError = ErrorType<ErrorResponse>, TContext = unknown>(
  options?: {
    mutation?: UseMutationOptions<
      Awaited<ReturnType<typeof login>>,
      TError,
      { data: BodyType<LoginRequest> },
      TContext
    >
    request?: SecondParameter<typeof customInstance>
  },
  queryClient?: QueryClient
): UseMutationResult<
  Awaited<ReturnType<typeof login>>,
  TError,
  { data: BodyType<LoginRequest> },
  TContext
> => {
  return useMutation(getLoginMutationOptions(options), queryClient)
}
